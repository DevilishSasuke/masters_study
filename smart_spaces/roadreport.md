# RoadReport

## Описание

Интеллектуальная распределённая система мониторинга состояния дорожного покрытия RoadReport, которая объединяет данные с транспортных средств, беспилотников и метеоисточников, чтобы в реальном времени выявлять, классифицировать и отслеживать развитие дефектов на дорогах.

Она основана на технологиях компьютерного зрения и машинного обучения.

Целью системы является создание пространства наблюдения за состоянием дорог, где большинство участников дорожного движения вносит вклад в поддержание актуальности информации.

# $Часть$ $I$: Постановка задачи

# **1. Концептуальная модель (визуальная схема — текстовая форма)**

   **Центральный элемент:**

- **Облачная система**
  
  **Входящие агенты (данные поступают в облако системы):**
1. **Автомобильный агент**
   
   * предварительная обработка изображения с камер с помощью алгоритмов компьютерного зрения
   
   * отправка полученных данных и телеметрии в  облачную систему

2. **Агент дрона** 
   
   * осуществляет пролеты по заданным маршрутам
   
   * собирает изображения для получения актуальной информации об состоянии дорог 

3*  **Агент метеоданных**

* производит подключение к API метеосистем для получения погодных условий и дальнейшего прогнозирования на их основе 
4. **Агент аналитики данных**
   
   * выявления дефектов на изображении, их классификация
   
   * прогнозирование потеницально опасных и проблемных зон
   
   * обновление интерактивной карты
   
   * создание отчетов для муниципальных служб

5. **Агент приложение**
   
   * интерфейс для обычных пользователей и муниципальных служб (в виде интерактивной карты-приложения)

![smart_spaces.png](.\smart_spaces.png)

   ---

# **2. Основные функции**

## **Муниципальные службы**

### 1. Мониторинг состояния дорожной сети

- интерактивная карта дефектов

- уведомления о появлении критичных разрушений

- прогнозирование потенциально опасных зон
  
  ### 2. Формирование приоритетов ремонта

- доступ к дашборду, содержащему существенные проблемы и прогнозируемые затраты ресурсов на каждую проблему

- автоматическая сортировка по степени опасности

- оценка риска разрушения в ближайшие дни
  
  ### 3. Управление дронами наблюдения

- настройка маршрутов и частоты облета дронов

- возможность внепланового запуска дронов
  
   ---

## **Водители, пешеходы**

### 1. Получение информации о проблемных участках дорог

- карта дефектов и неровностей

- построение маршрута с обходом проблемных участков
  
  ### 2. Возможность создания заявки о дефекте

- фиксация дефекта с помощью фото или видео

- GPS-привязка
  
  ### 3. Оповещения о значимых изменениях состояния дорог

- предупреждение
  
  - о ямах, колее, разрушениях кромки дороги - для водителей
  
  - о проблемах с тротуаром, возмоожных местах скопления воды - для пешеходов, велосипедистов, иных мобильных ТС
    
    ---

# **3. Построение сервисов взаимодействующими агентами**

#### **Сценарий 1. Автомобильный агент фиксирует дефект**

1. **Автомобильный агент** выполняет предварительную обработку изображения с камеры (выделение потенциальных дефектов)

2. При подключении к интернету кадры с дефектами и телеметрия отправляются в **Облачную систему**

3. **Агент аналитики данных** выполняет обнаружение дефекта, его классификацию, сравнение с предыдущими результатами по данному дефекту

4. **Агент аналитики** обновляет интерактивную карту

5. **Агент приложения** предоставляет доступ к обновленной информации

#### **Сценарий 2. Дрон выполняет разведку дороги**

1. **Агент дрона** получает от облачной системы маршрут полета

2. Дрон выполняет съемку участка дороги с воздуха

3. По возвращении на базу снимки передаются в **Облачную систему**

4. **Агент аналитики данных** анализирует фотографии, определяя новые дефекты и просчитывает динамику разрушений

5. Интерактивная карта обновляется, предоставляя доступ к  данным через **Агент приложения**.

#### **Сценарий 3. Пользователь сообщает о дефекте**

1. Пользователь отправляет фото и координаты дефекта через **Агент приложения**

2. Изображение и описание поступают в **Облачную систему**

3. **Агент аналитики данных** производит обнаружение и классификацию дефекта, а затем добавляет информацию на интерактивную карту, которая отображается в **Агенте приложения**

# **4. Используемая аппаратура для запуска агентов**

## **Аппаратура автомобилей**

- Видеокамера, позволяющая анализировать дорожное полотно

- GPS/ГЛОНАСС

- Мобильный компьютер для предобработки изображений

- Периодическое подключение к интернету для отправки данных в облачную систему (не реже 1 раза в день) 
  
  ## **Дроны**

- Видеокамера для фиксации

- Автопилот

- Возможность передачи данных до прибытия на базовую станцию (для экстренных случаев)
  
  ## **Инфраструктура сервера и облака**

- Видеокарты для обработки с помощью нейронных сетей и прогнозирования событий

- Система хранения полученных данных

- База данных дефектов

- API для возможных агентов
  
  ## **Пользовательские устройства**

- Десктопное приложение для муниципальных служб

- Мобильное и веб-приложение интерактивной карты для водителей и пешеходов
  
   ---

# **5. Близкие существующие решения**

1. **Яндекс.Пробки / Google Maps** - существующее решение с анализом автомобильных пробок на дороге

2. **RoadBotics (США)** — анализ состояния дорог по видео от автомобилей.

# **6. Интеллектуальность системы**

1. Автоматическое распознавание дефектов с помощью нейросетей с помощью компьютерного зрения позволяет определить тип, размер и критичность дефекта

2- Отслеживание динамики состояния дороги во времени, система хранит предыдущие состояния, позволяя произвести оценку изменений

3- Прогнозирование разрушения покрытия путем учета интенсивности потока транспорта, температуру, влажность, предыдущие фотографии отрезка дороги

4- Формирование оптимальных ремонтных приоритетов путем вычисления приблизительного расхода ресурсов на каждый критический дефект 

# **7. Размерность приложения**

**Количество агентов**

В системе функционирует **6 взаимосвязанных агентов**, каждый из которых выполняет специализированную роль

**Пользователи**

Муниципальные службы: 1 диспетчер на $1млн$ населения

Водители и пешеходы: $50-100тыс$ на $1млн$ населения

Автомобили-автопилоты: примерно $1000–1500$ автономных транспортных средств на $1млн$ населения

**Объемы данных**

Фиксация пешеходов: $5.000$ фото на $1 млн$ населения $\rightarrow$ $\approx 10$ $Гб$ фото/день

Дроны: 5 дронов на 100 км$^2$, $1$ $Гб$ с каждого дрона $\rightarrow$ $\approx$ $5$ $Гб$ данных/день

Автомобили: $450 тыс$ автомобилей на $1млн$ населения, примерно половина возможна к оснащению умным агентом, с предварительной обработкой ожидается около $5$ $Мб$ информации с каждого автомобиля $\rightarrow$ $\approx$ $1$ $Тб$ / день

# $Часть$ $II$: Многоагентная архитектура и детальное проектирование

## Детализация требований в сценариях использования

### Сценарий 1. Получение и обработка данных от автомобильного агента

**Цель:** Обнаружение дефектов дорожного покрытия в процессе движения автомобиля

**Шаги:**

1. **Сбор данных**
   
   * Получение потока данных с камер автомобиля (разрешение HD или выше)
   
   * Одновременно с этим сбор телеметрических параметров с датчиков: скорость, координаты GPS, время, направление движения

2. **Предобработка**, выполняющаяся на устройстве автомобиля
   
   * Фильтрация плохих кадров (размытие, низкая освещенность)

3. **Предварительное распознавание**
   
   * Определение возможных дефектов дорожного покрытия
   
   * Выделение рамки обнаруженного объекта и расчет уверенности для объекта

4. **Формирование пакета данных**
   
   * Включает в себя изображение, содержащее дефект, метаданные и телеметрические данные, обнаруженный тип дефекта и уверенность в этом типе

5. **Передача данных**
   
   * При установлении интернет-соединения происходит передача по защищенному каналу, такому как HTTPS.

6. **Обработка в агенте аналитики данных**
   
   * Точная сегментация дефекта
   
   * Классификация типа и оценка размеров

7* **Внесение в общее пространство данных**
   
   * Обновление историю наблюдений за данным дефектом
   
   * Сравнение полученные размеры с предыдущим размером
   
   * Прогноз возможность дальнейшего разрушения
   
   * Добавление обновленных данных на интерактивную карту



### Сценарий 2. Получение и обработка данных от дронов

**Цель:** Обнаружение дефектов и актуализация состояний обнаруженных дефектов с помощью периодичной съемки, обследование труднодоступных участков

**Шаги:**

1. **Планирование миссии**
   
   * Муниципальная служба задает маршрут полета, частоту обследования заданного маршрута и приоритет миссии (обычная или экстренная)

2. **Сбор данных в полете**
   
   * В ходе полета дрон фиксирует снимки высокого разрешения, координаты GPS, телеметрию и высоту полета

3* **Передача данных**
   
   * По завершении миссии дрон возвращается на базу и передает данные при подключении к сети интернет
   
   * Производится передача снимков и метаданных

4* **Обработка в агенте аналитики данных**
   
   * Точная сегментация дефекта
   
   * Классификация типа и оценка размеров

5* **Внесение в общее пространство данных**
   
   - Обновление историю наблюдений за данным дефектом
   
   - Сравнение полученные размеры с предыдущим размером
   
   - Прогноз возможность дальнейшего разрушения
   
   - Добавление обновленных данных на интерактивную карту



### Сценарий 3. Обработка пользовательских сообщений

**Цель:** Возможность 

**Шаги:**

1. **Сбор данных**
   
   * Пользователь отправляет фото или короткое видео с дефектом, подтверждает обнаруженные координаты GPS или указывает точку на карте, оставляет комментарий  (опционально)

2* **Отправка данных**
   
   * После отправки пользовательского сообщения в облачную систему, данные передаются в агента аналитики данных для дальнейшей обработки

3* **Обработка в агенте аналитики данных**
   
   - Точная сегментация дефекта
   
   - Классификация типа и оценка размеров

4- **Внесение в общее пространство данных**
   
   - Обновление историю наблюдений за данным дефектом
   
   - Сравнение полученные размеры с предыдущим размером
   
   - Прогноз возможность дальнейшего разрушения
   
   - Добавление обновленных данных на интерактивную карту



## Общая информация для агентов

### База дорог

1. Цифровая карта дорожной сети

2. Разбиение дорог на сегменты по 50-100 метров

3. Привязка каждого сегмента дороги к координатам и метаданным (тип покрытия, категория дороги и др.)

### База дефектов дорожного покрытия

1. Уникальный идентификатор дефекта

2. Местоположение и сегмент дороги

3. Тип дефекта

4. Текущая степень критичности дефекта

5. Дата обнаружения и история изменений

6. Источник сообщения о дефекте

### Погодные данные

1. Дата и время получения данных

2. Текущие погодные параметры

3. Краткие прогнозы

### История обнаружений дефектов

1. Автомобильные кадры

2. Снимки дронов

3. Пользовательские сообщения

4. Телеметрия

### Пользовательские сообщения

1. Сообщения от людей через приложение

2. Фото или видео фиксация

3. Статус подтверждения дефекта



## Анализ интеллектуальности

1. **Фильтрация данных**: Система автоматически оценивает качество входящих изображений и отклоняет обработку нерелевантных или низкокачественных кадров. Используется в сценариях 1, 2.

2. **Первичное распознавание дефектов**: На стороне устройств выполняется детекция потенциальных дефектов с определением границ, класса и уверенности.  Используется в сценариях 1.

3. **Точный анализ данных в агенте аналитики**: Поступающие изображения проходят точную сегментацию дефектов, финальную классификацию и оценку размеров. Используется в сценариях 1, 2, 3.

4. **Ведение истории и оценка динамики дефектов**: Система сравнивает новые наблюдения с существующими, обновляет состояние дефектов, определяет изменения размеров и прогнозирует дальнейшее разрушение покрытия. Используется в сценариях 1, 2, 3.

5. **Оценка достоверности пользовательских данных**: Сообщения от людей проходят проверку на соответствие координат и присутствие дефекта на изображении. Используется в сценариях 3.

6. **Дополнение данных внешней информацией**: К обнаруженным данным добавляются короткие актуальные погодные условия, которые влияют на интерпретацию дефектов и прогноз разрушений. Используется в сценариях 1, 2, 3.

7. **Интеграция данных с разных источников**: Система объединяет автомобильные данные, съемку с дронов и пользовательские сообщения, что позволяет сформировать актуальную картину состояния дорожной сети и отразить её на интерактивной карте. Используется в сценариях 1, 2, 3.
